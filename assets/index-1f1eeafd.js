import{c as w,a as z,g as W,i as L,b as B,r as ce,t as K,d as xe,e as k,s as ee,u as m,f as ne,h as J,j as R,S as Ce,k as de,o as Re,F as Ae,P as Be,l as re}from"./entry-client-3094b5c6.js";const Ve="_App_qn81j_1",Fe="_GlobalControls_qn81j_6",Pe="_Colors_qn81j_18",De="_BackgroundColorPopup_qn81j_27",Ge="_disabled_qn81j_71",se={App:Ve,GlobalControls:Fe,Colors:Pe,BackgroundColorPopup:De,disabled:Ge},Me="_ColorComponentControl_1g4hn_1",Ue={ColorComponentControl:Me},F="RGB",O="HSL",[S,je]=w(F),[te,pe]=w("#ffffff"),[we,He]=w(!0),ze=K('<div><label></label><input type="range" min="0"><input type="number" min="0">');function be(e){const o=z(()=>S()===F?255:e.index===0?360:100),v=z(()=>S()[e.index]),i=a=>{try{let r;switch(S()){case F:if(r=parseInt(a.target.value),r>255)return;break;case O:if(e.index===0){if(r=parseInt(a.target.value),r>360)return}else if(r=parseFloat(a.target.value),r>100)return;break}if(isNaN(r)||r<0)return;e.setValue(r)}catch{}};return(()=>{const a=W(ze),r=a.firstChild,s=r.nextSibling,d=s.nextSibling;return L(r,v),s.$$input=i,d.$$input=i,B(l=>{const u=Ue.ColorComponentControl,g=v(),E=o(),P=`${v()} component slider`,A=o(),D=`${v()} component number input`;return u!==l._v$&&k(a,l._v$=u),g!==l._v$2&&ee(r,"for",l._v$2=g),E!==l._v$3&&ee(s,"max",l._v$3=E),P!==l._v$4&&ee(s,"aria-label",l._v$4=P),A!==l._v$5&&ee(d,"max",l._v$5=A),D!==l._v$6&&ee(d,"aria-label",l._v$6=D),l},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),B(()=>s.value=e.value),B(()=>d.value=e.value),ce(),a})()}xe(["input"]);const me=(e,o,v)=>{const i=e/255,a=o/255,r=v/255,s=Math.max(i,a,r),d=Math.min(i,a,r);let l,u,g;return s===d?l=0:s===i?l=(60*((a-r)/(s-d))%360+360)%360:s===a?l=60*((r-i)/(s-d))+120:l=60*((i-a)/(s-d))+240,g=(s+d)/2,s===d?u=0:g<=.5?u=(s-d)/(s+d):u=(s-d)/(2-s-d),l=Math.round(l),u=parseFloat((u*100).toFixed(1)),g=parseFloat((g*100).toFixed(1)),[l,u,g]},fe=(e,o,v)=>{const i=o/100,a=v/100;let r=(1-Math.abs(2*a-1))*i,s=r*(1-Math.abs(e/60%2-1)),d=a-r/2,l,u,g;return e>=0&&e<60?(l=r,u=s,g=0):e>=60&&e<120?(l=s,u=r,g=0):e>=120&&e<180?(l=0,u=r,g=s):e>=180&&e<240?(l=0,u=s,g=r):e>=240&&e<300?(l=s,u=0,g=r):(l=r,u=0,g=s),l=Math.round((l+d)*255),u=Math.round((u+d)*255),g=Math.round((g+d)*255),[l,u,g]},ie=e=>[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5),16)],Ee=e=>{const o=ie(e);return me(...o)},ye=(e,o,v)=>{const i=a=>{const r=a/255;return r<=.03928?r/12.92:((r+.055)/1.055)**2.4};return .2126*i(e)+.7152*i(o)+.0722*i(v)+.05},Ne=(e,o)=>{const v=ye(...e),i=ye(...o);return v>i?v/i:i/v},qe="_ColorControls_77rxm_1",Te="_ColorBlock_77rxm_10",Je="_ControlsContainer_77rxm_17",Oe="_InfoLine_77rxm_24",We="_HexInput_77rxm_31",Ke="_ContrastRatio_77rxm_41",Qe="_Sliders_77rxm_49",H={ColorControls:qe,ColorBlock:Te,ControlsContainer:Je,InfoLine:Oe,HexInput:We,ContrastRatio:Ke,Sliders:Qe},Xe=K("<div>"),Ye=K('<div><div><input type="text" maxlength="7" aria-label="hex input"><div><span></span><span>:1</span></div></div><div><!#><!/><!#><!/><!#><!/>'),Ze=K("<div><!#><!/><!#><!/>");function Se(e){const[o,v,i]=S()===F?ie(m(e.value)):Ee(m(e.value)),[a,r]=w(o),[s,d]=w(v),[l,u]=w(i);ne(c=>{if(c!==S()){if(S()===F){const[b,$,t]=fe(m(a),m(s),m(l));r(b),d($),u(t)}else{const[b,$,t]=me(m(a),m(s),m(l));r(b),d($),u(t)}return S()}},S());const g=z(()=>{const c=a(),b=s(),$=l();let t;switch(m(S)){case F:t=`rgb(${c}, ${b}, ${$})`;break;case O:t=`hsl(${c}, ${b}%, ${$}%)`;break}let _={"background-color":t};return e.selected!=null&&e.selected()&&(_={..._,outline:"dodgerblue solid 3px","outline-offset":"0.1rem"}),_}),E=()=>{e.selected&&e.setSelected(!e.selected())},P=()=>{let c=[a(),s(),l()];m(S)===O&&(c=fe(...c));const b=`#${c.map($=>$.toString(16).padStart(2,0)).join("")}`;return e.setBackgroundColor!=null&&e.setBackgroundColor(b),e.setValue!=null&&e.setValue(b),b},A=c=>{let b=c.target.value;if(b.length===6&&!b.startsWith("#"))b=`#${b}`;else if(b.length!==7)return;try{const[$,t,_]=ie(b);let C=[$,t,_];m(S)===O&&(C=me($,t,_)),r(C[0]),d(C[1]),u(C[2])}catch{}},[D,Q]=w(0);ne(()=>{let c=[a(),s(),l()],b=ie(te());m(S)===O&&(c=fe(...c));const $=Ne(c,b);Q((Math.floor($*100)/100).toFixed(2))});const ue=()=>{const c=D();return{color:c>=7?"#00ff91":c>=3?"white":"#ff003d"}};return(()=>{const c=W(Ze),b=c.firstChild,[$,t]=J(b.nextSibling),_=$.nextSibling,[C,y]=J(_.nextSibling);return L(c,R(Ce,{get when(){return e.index!=null},get children(){const f=W(Xe);return f.$$click=h=>{h.stopPropagation(),E()},B(h=>{const I=H.ColorBlock,G=g();return I!==h._v$&&k(f,h._v$=I),h._v$2=de(f,G,h._v$2),h},{_v$:void 0,_v$2:void 0}),ce(),f}}),$,t),L(c,R(Ce,{get when(){return we()||e.always!=null},get children(){const f=W(Ye),h=f.firstChild,I=h.firstChild,G=I.nextSibling,V=G.firstChild,M=h.nextSibling,U=M.firstChild,[X,N]=J(U.nextSibling),_e=X.nextSibling,[q,ge]=J(_e.nextSibling),$e=q.nextSibling,[ve,oe]=J($e.nextSibling);return I.$$input=A,L(V,D),L(M,R(be,{index:0,get value(){return a()},setValue:r}),X,N),L(M,R(be,{index:1,get value(){return s()},setValue:d}),q,ge),L(M,R(be,{index:2,get value(){return l()},setValue:u}),ve,oe),B(p=>{const Y=H.ControlsContainer,Z=H.InfoLine,n=H.HexInput,j=H.ContrastRatio,le=ue(),T=H.Sliders;return Y!==p._v$3&&k(f,p._v$3=Y),Z!==p._v$4&&k(h,p._v$4=Z),n!==p._v$5&&k(I,p._v$5=n),j!==p._v$6&&k(G,p._v$6=j),p._v$7=de(V,le,p._v$7),T!==p._v$8&&k(M,p._v$8=T),p},{_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0}),B(()=>I.value=P()),ce(),f}}),C,y),B(()=>k(c,H.ColorControls)),c})()}xe(["click","input"]);let ae;const et=new Uint8Array(16);function tt(){if(!ae&&(ae=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ae))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ae(et)}const x=[];for(let e=0;e<256;++e)x.push((e+256).toString(16).slice(1));function nt(e,o=0){return(x[e[o+0]]+x[e[o+1]]+x[e[o+2]]+x[e[o+3]]+"-"+x[e[o+4]]+x[e[o+5]]+"-"+x[e[o+6]]+x[e[o+7]]+"-"+x[e[o+8]]+x[e[o+9]]+"-"+x[e[o+10]]+x[e[o+11]]+x[e[o+12]]+x[e[o+13]]+x[e[o+14]]+x[e[o+15]]).toLowerCase()}const ot=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ke={randomUUID:ot};function lt(e,o,v){if(ke.randomUUID&&!o&&!e)return ke.randomUUID();e=e||{};const i=e.random||(e.rng||tt)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,o){v=v||0;for(let a=0;a<16;++a)o[v+a]=i[a];return o}return nt(i)}const rt=K("<div>"),st=K('<div><div><button aria-label="color mode"><img src="/chromaplay/icons/palette_FILL0_wght400_GRAD0_opsz48.svg" alt="color mode"></button><button aria-label="add color"><img src="/chromaplay/icons/add_FILL0_wght400_GRAD0_opsz48.svg" alt="add"></button><button disabled aria-label="delete selected colors"><img src="/chromaplay/icons/delete_FILL0_wght400_GRAD0_opsz48.svg" alt="delete"></button><button aria-label="toggle background color controls"><img src="/chromaplay/icons/format_color_fill_FILL0_wght400_GRAD0_opsz48.svg" alt="background color"></button><button aria-label="toggle color controls"><img src="/chromaplay/icons/tune_FILL0_wght400_GRAD0_opsz48.svg" alt="swap"></button><button disabled aria-label="swap selected colors"><img src="/chromaplay/icons/autorenew_FILL0_wght400_GRAD0_opsz48.svg" alt="swap"></button><input id="loadPalette" type="file" accept=".json, .toml"><button aria-label="load color palette"><img src="/chromaplay/icons/upload_FILL0_wght400_GRAD0_opsz48.svg" alt="load"></button><a download="chromaplay.json"></a><button aria-label="download color palette"><img src="/chromaplay/icons/download_FILL0_wght400_GRAD0_opsz48.svg" alt="download"></button></div><div></div><!#><!/>');function it(){const[e,o]=w([],{equals:!1}),v=t=>{const[_,C]=w(!1),[y,f]=w(t);return{id:lt(),selected:_,setSelected:C,value:y,setValue:f}},i=()=>{o([...m(e),v("#000000")])},a=()=>o(e().filter(t=>!t.selected())),r=()=>{const t=m(e),_=t.reduce((C,y,f)=>(y.selected()&&(y.setSelected(!1),C.push({c:y,i:f})),C),[]);t.splice(_[0].i,1,_[1].c),t.splice(_[1].i,1,_[0].c),o(t)},[s,d]=w(!1),l=()=>{d(!s())};Re(()=>{i(),document.body.addEventListener("click",()=>{console.log("deselecting all"),m(e).forEach(t=>t.setSelected(!1)),d(!1)})});const u=z(()=>e().some(t=>t.selected()));let g;ne(()=>{u()?g.removeAttribute("disabled"):g.setAttribute("disabled","")});const E=z(()=>u()?{opacity:1}:{opacity:.4}),P=z(()=>e().filter(t=>t.selected()).length===2);let A;ne(()=>{P()?A.removeAttribute("disabled"):A.setAttribute("disabled","")});const D=z(()=>P()?{opacity:1}:{opacity:.4});ne(()=>{const t=document.documentElement;t.style.backgroundColor=te()});let Q;const ue=t=>{const _=t.target,C=new FileReader;C.onload=()=>{_.value=null;const y=JSON.parse(C.result);pe(y.background);const f=[];for(const h of y.colors)f.push(v(h));o(f)},C.readAsText(t.target.files[0])};let c;const b=()=>{const t={background:m(te),colors:[]};for(const _ of m(e))t.colors.push(m(_.value));c.setAttribute("href",`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(t))}`),c.click()},$=(t,_)=>{t.stopPropagation(),_()};return(()=>{const t=W(st),_=t.firstChild,C=_.firstChild,y=C.nextSibling,f=y.nextSibling,h=f.firstChild,I=f.nextSibling,G=I.nextSibling,V=G.nextSibling,M=V.firstChild,U=V.nextSibling,X=U.nextSibling,N=X.nextSibling,_e=N.nextSibling,q=_.nextSibling,ge=q.nextSibling,[$e,ve]=J(ge.nextSibling);C.$$click=n=>$(n,()=>je(S()===F?O:F)),y.$$click=n=>$(n,i),f.$$click=n=>$(n,a);const oe=g;typeof oe=="function"?re(oe,f):g=f,I.$$click=n=>$(n,l),G.$$click=n=>$(n,()=>He(!we())),V.$$click=n=>$(n,r);const p=A;typeof p=="function"?re(p,V):A=V,U.addEventListener("change",ue);const Y=Q;typeof Y=="function"?re(Y,U):Q=U,U.style.setProperty("display","none"),X.$$click=n=>$(n,()=>Q.click());const Z=c;return typeof Z=="function"?re(Z,N):c=N,N.style.setProperty("display","none"),_e.$$click=n=>$(n,b),L(q,R(Ae,{get each(){return e()},children:(n,j)=>R(Se,{get id(){return`color_${n.id}`},get index(){return j()},get selected(){return n.selected},get setSelected(){return n.setSelected},get value(){return n.value},get setValue(){return n.setValue}})})),L(t,R(Ce,{get when(){return s()},get children(){return R(Be,{get children(){const n=W(rt);return L(n,R(Se,{value:te,setBackgroundColor:pe,always:!0})),B(()=>k(n,se.BackgroundColorPopup)),n}})}}),$e,ve),B(n=>{const j=se.App,le=se.GlobalControls,T=te(),Ie=E(),Le=D(),he=se.Colors;return j!==n._v$&&k(t,n._v$=j),le!==n._v$2&&k(_,n._v$2=le),T!==n._v$3&&((n._v$3=T)!=null?_.style.setProperty("background-color",T):_.style.removeProperty("background-color")),n._v$4=de(h,Ie,n._v$4),n._v$5=de(M,Le,n._v$5),he!==n._v$6&&k(q,n._v$6=he),n},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),ce(),t})()}xe(["click"]);export{it as default};
