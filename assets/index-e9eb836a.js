import{c as I,a as U,g as q,i as A,b as V,r as de,t as T,d as xe,e as k,s as X,u as m,f as Z,h as E,j as B,S as Ce,k as ue,o as Le,F as Re,P as Ae,l as se}from"./entry-client-28c2a97b.js";const Be="_App_qn81j_1",Ve="_GlobalControls_qn81j_6",Fe="_Colors_qn81j_18",De="_BackgroundColorPopup_qn81j_27",Ge="_disabled_qn81j_71",ie={App:Be,GlobalControls:Ve,Colors:Fe,BackgroundColorPopup:De,disabled:Ge},Me="_ColorComponentControl_1ethj_1",Pe={ColorComponentControl:Me},F="RGB",N="HSL",[y,je]=I(F),[Y,Se]=I("#ffffff"),[we,Ue]=I(!0),He=T('<div><label></label><input type="range" min="0"><input type="number" min="0">');function fe(e){const n=U(()=>y()===F?255:e.index===0?360:100),$=U(()=>y()[e.index]),i=s=>{try{let l;switch(y()){case F:if(l=parseInt(s.target.value),l>255)return;break;case N:if(e.index===0){if(l=parseInt(s.target.value),l>360)return}else if(l=parseFloat(s.target.value),l>100)return;break}if(isNaN(l)||l<0)return;e.setValue(l)}catch{}};return(()=>{const s=q(He),l=s.firstChild,r=l.nextSibling,c=r.nextSibling;return A(l,$),r.$$input=i,c.$$input=i,V(o=>{const u=Pe.ColorComponentControl,g=$(),H=n(),D=`${$()} component slider`,z=n(),G=`${$()} component number input`;return u!==o._v$&&k(s,o._v$=u),g!==o._v$2&&X(l,"for",o._v$2=g),H!==o._v$3&&X(r,"max",o._v$3=H),D!==o._v$4&&X(r,"aria-label",o._v$4=D),z!==o._v$5&&X(c,"max",o._v$5=z),G!==o._v$6&&X(c,"aria-label",o._v$6=G),o},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),V(()=>r.value=e.value),V(()=>c.value=e.value),de(),s})()}xe(["input"]);const me=(e,n,$)=>{const i=e/255,s=n/255,l=$/255,r=Math.max(i,s,l),c=Math.min(i,s,l);let o,u,g;return r===c?o=0:r===i?o=(60*((s-l)/(r-c))%360+360)%360:r===s?o=60*((l-i)/(r-c))+120:o=60*((i-s)/(r-c))+240,g=(r+c)/2,r===c?u=0:g<=.5?u=(r-c)/(r+c):u=(r-c)/(2-r-c),o=Math.round(o),u=parseFloat((u*100).toFixed(1)),g=parseFloat((g*100).toFixed(1)),[o,u,g]},be=(e,n,$)=>{const i=n/100,s=$/100;let l=(1-Math.abs(2*s-1))*i,r=l*(1-Math.abs(e/60%2-1)),c=s-l/2,o,u,g;return e>=0&&e<60?(o=l,u=r,g=0):e>=60&&e<120?(o=r,u=l,g=0):e>=120&&e<180?(o=0,u=l,g=r):e>=180&&e<240?(o=0,u=r,g=l):e>=240&&e<300?(o=r,u=0,g=l):(o=l,u=0,g=r),o=Math.round((o+c)*255),u=Math.round((u+c)*255),g=Math.round((g+c)*255),[o,u,g]},ae=e=>[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5),16)],ze=e=>{const n=ae(e);return me(...n)},ye=(e,n,$)=>{const i=s=>{const l=s/255;return l<=.03928?l/12.92:((l+.055)/1.055)**2.4};return .2126*i(e)+.7152*i(n)+.0722*i($)+.05},Ee=(e,n)=>{const $=ye(...e),i=ye(...n);return $>i?$/i:i/$},Ne="_ColorControls_1ff3n_1",qe="_ColorBlock_1ff3n_10",Te="_ControlsContainer_1ff3n_16",Je="_InfoLine_1ff3n_23",Oe="_HexInput_1ff3n_30",We="_ContrastRatio_1ff3n_40",Ke="_Sliders_1ff3n_48",j={ColorControls:Ne,ColorBlock:qe,ControlsContainer:Te,InfoLine:Je,HexInput:Oe,ContrastRatio:We,Sliders:Ke},Qe=T("<div>"),Xe=T('<div><div><input type="text" maxlength="7" aria-label="hex input"><div><span></span><span>:1</span></div></div><div><!#><!/><!#><!/><!#><!/>'),Ye=T("<div><!#><!/><!#><!/>");function pe(e){const[n,$,i]=y()===F?ae(m(e.value)):ze(m(e.value)),[s,l]=I(n),[r,c]=I($),[o,u]=I(i);Z(d=>{if(d!==y()){if(y()===F){const[v,t,a]=be(m(s),m(r),m(o));l(v),c(t),u(a)}else{const[v,t,a]=me(m(s),m(r),m(o));l(v),c(t),u(a)}return y()}},y());const g=U(()=>{const d=s(),v=r(),t=o();let a;switch(m(y)){case F:a=`rgb(${d}, ${v}, ${t})`;break;case N:a=`hsl(${d}, ${v}%, ${t}%)`;break}let f={"background-color":a};return e.selected!=null&&e.selected()&&(f={...f,outline:"dodgerblue solid 3px","outline-offset":"0.1rem"}),f}),H=()=>{e.selected&&e.setSelected(!e.selected())},D=()=>{let d=[s(),r(),o()];m(y)===N&&(d=be(...d));const v=`#${d.map(t=>t.toString(16).padStart(2,0)).join("")}`;return e.setBackgroundColor!=null&&e.setBackgroundColor(v),e.setValue!=null&&e.setValue(v),v},z=d=>{let v=d.target.value;if(v.length===6&&!v.startsWith("#"))v=`#${v}`;else if(v.length!==7)return;try{const[t,a,f]=ae(v);let b=[t,a,f];m(y)===N&&(b=me(t,a,f)),l(b[0]),c(b[1]),u(b[2])}catch{}},[G,J]=I(0);Z(()=>{let d=[s(),r(),o()],v=ae(Y());m(y)===N&&(d=be(...d));const t=Ee(d,v);J((Math.floor(t*100)/100).toFixed(2))});const _e=()=>{const d=G();return{color:d>=7?"#00ff91":d>=3?"white":"#ff003d"}};return(()=>{const d=q(Ye),v=d.firstChild,[t,a]=E(v.nextSibling),f=t.nextSibling,[b,h]=E(f.nextSibling);return A(d,B(Ce,{get when(){return e.index!=null},get children(){const S=q(Qe);return S.$$click=H,V(p=>{const L=j.ColorBlock,R=g();return L!==p._v$&&k(S,p._v$=L),p._v$2=ue(S,R,p._v$2),p},{_v$:void 0,_v$2:void 0}),de(),S}}),t,a),A(d,B(Ce,{get when(){return we()||e.always!=null},get children(){const S=q(Xe),p=S.firstChild,L=p.firstChild,R=L.nextSibling,ee=R.firstChild,w=p.nextSibling,te=w.firstChild,[M,ge]=E(te.nextSibling),O=M.nextSibling,[ne,$e]=E(O.nextSibling),ve=ne.nextSibling,[oe,le]=E(ve.nextSibling);return L.$$input=z,A(ee,G),A(w,B(fe,{index:0,get value(){return s()},setValue:l}),M,ge),A(w,B(fe,{index:1,get value(){return r()},setValue:c}),ne,$e),A(w,B(fe,{index:2,get value(){return o()},setValue:u}),oe,le),V(x=>{const W=j.ControlsContainer,_=j.InfoLine,P=j.HexInput,K=j.ContrastRatio,Q=_e(),re=j.Sliders;return W!==x._v$3&&k(S,x._v$3=W),_!==x._v$4&&k(p,x._v$4=_),P!==x._v$5&&k(L,x._v$5=P),K!==x._v$6&&k(R,x._v$6=K),x._v$7=ue(ee,Q,x._v$7),re!==x._v$8&&k(w,x._v$8=re),x},{_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0}),V(()=>L.value=D()),de(),S}}),b,h),V(()=>k(d,j.ColorControls)),d})()}xe(["click","input"]);let ce;const Ze=new Uint8Array(16);function et(){if(!ce&&(ce=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ce))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ce(Ze)}const C=[];for(let e=0;e<256;++e)C.push((e+256).toString(16).slice(1));function tt(e,n=0){return(C[e[n+0]]+C[e[n+1]]+C[e[n+2]]+C[e[n+3]]+"-"+C[e[n+4]]+C[e[n+5]]+"-"+C[e[n+6]]+C[e[n+7]]+"-"+C[e[n+8]]+C[e[n+9]]+"-"+C[e[n+10]]+C[e[n+11]]+C[e[n+12]]+C[e[n+13]]+C[e[n+14]]+C[e[n+15]]).toLowerCase()}const nt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ke={randomUUID:nt};function ot(e,n,$){if(ke.randomUUID&&!n&&!e)return ke.randomUUID();e=e||{};const i=e.random||(e.rng||et)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,n){$=$||0;for(let s=0;s<16;++s)n[$+s]=i[s];return n}return tt(i)}const lt=T("<div>"),rt=T('<div><div><button aria-label="color mode"><img src="/icons/palette_FILL0_wght400_GRAD0_opsz48.svg" alt="color mode"></button><button aria-label="add color"><img src="/icons/add_FILL0_wght400_GRAD0_opsz48.svg" alt="add"></button><button disabled aria-label="delete selected colors"><img src="/icons/delete_FILL0_wght400_GRAD0_opsz48.svg" alt="delete"></button><button aria-label="toggle background color controls"><img src="/icons/format_color_fill_FILL0_wght400_GRAD0_opsz48.svg" alt="background color"></button><button aria-label="toggle color controls"><img src="/icons/tune_FILL0_wght400_GRAD0_opsz48.svg" alt="swap"></button><button disabled aria-label="swap selected colors"><img src="/icons/autorenew_FILL0_wght400_GRAD0_opsz48.svg" alt="swap"></button><input id="loadPalette" type="file" accept=".json, .toml"><button aria-label="load color palette"><img src="/icons/upload_FILL0_wght400_GRAD0_opsz48.svg" alt="load"></button><a download="chromaplay.json"></a><button aria-label="download color palette"><img src="/icons/download_FILL0_wght400_GRAD0_opsz48.svg" alt="download"></button></div><div></div><!#><!/>');function it(){const[e,n]=I([],{equals:!1}),$=t=>{const[a,f]=I(!1),[b,h]=I(t);return{id:ot(),selected:a,setSelected:f,value:b,setValue:h}},i=()=>{n([...m(e),$("#000000")])},s=()=>n(e().filter(t=>!t.selected())),l=()=>{const t=m(e),a=t.reduce((f,b,h)=>(b.selected()&&(b.setSelected(!1),f.push({c:b,i:h})),f),[]);t.splice(a[0].i,1,a[1].c),t.splice(a[1].i,1,a[0].c),n(t)};Le(()=>{i()});const r=U(()=>e().some(t=>t.selected()));let c;Z(()=>{r()?c.removeAttribute("disabled"):c.setAttribute("disabled","")});const o=U(()=>r()?{opacity:1}:{opacity:.4}),u=U(()=>e().filter(t=>t.selected()).length===2);let g;Z(()=>{u()?g.removeAttribute("disabled"):g.setAttribute("disabled","")});const H=U(()=>u()?{opacity:1}:{opacity:.4}),[D,z]=I(!1),G=()=>{z(!D())};Z(()=>{const t=document.documentElement;t.style.backgroundColor=Y()});let J;const _e=t=>{const a=t.target,f=new FileReader;f.onload=()=>{a.value=null;const b=JSON.parse(f.result);Se(b.background);const h=[];for(const S of b.colors)h.push($(S));n(h)},f.readAsText(t.target.files[0])};let d;const v=()=>{const t={background:m(Y),colors:[]};for(const a of m(e))t.colors.push(m(a.value));d.setAttribute("href",`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(t))}`),d.click()};return(()=>{const t=q(rt),a=t.firstChild,f=a.firstChild,b=f.nextSibling,h=b.nextSibling,S=h.firstChild,p=h.nextSibling,L=p.nextSibling,R=L.nextSibling,ee=R.firstChild,w=R.nextSibling,te=w.nextSibling,M=te.nextSibling,ge=M.nextSibling,O=a.nextSibling,ne=O.nextSibling,[$e,ve]=E(ne.nextSibling);f.$$click=()=>je(y()===F?N:F),b.$$click=i,h.$$click=s;const oe=c;typeof oe=="function"?se(oe,h):c=h,p.$$click=G,L.$$click=()=>Ue(!we()),R.$$click=l;const le=g;typeof le=="function"?se(le,R):g=R,w.addEventListener("change",_e);const x=J;typeof x=="function"?se(x,w):J=w,w.style.setProperty("display","none"),te.$$click=()=>J.click();const W=d;return typeof W=="function"?se(W,M):d=M,M.style.setProperty("display","none"),ge.$$click=v,A(O,B(Re,{get each(){return e()},children:(_,P)=>B(pe,{get id(){return`color_${_.id}`},get index(){return P()},get selected(){return _.selected},get setSelected(){return _.setSelected},get value(){return _.value},get setValue(){return _.setValue}})})),A(t,B(Ce,{get when(){return D()},get children(){return B(Ae,{get children(){const _=q(lt);return A(_,B(pe,{value:Y,setBackgroundColor:Se,always:!0})),V(()=>k(_,ie.BackgroundColorPopup)),_}})}}),$e,ve),V(_=>{const P=ie.App,K=ie.GlobalControls,Q=Y(),re=o(),Ie=H(),he=ie.Colors;return P!==_._v$&&k(t,_._v$=P),K!==_._v$2&&k(a,_._v$2=K),Q!==_._v$3&&((_._v$3=Q)!=null?a.style.setProperty("background-color",Q):a.style.removeProperty("background-color")),_._v$4=ue(S,re,_._v$4),_._v$5=ue(ee,Ie,_._v$5),he!==_._v$6&&k(O,_._v$6=he),_},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),de(),t})()}xe(["click"]);export{it as default};
