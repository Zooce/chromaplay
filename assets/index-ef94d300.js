import{c as I,a as j,g as q,i as A,b as V,r as de,t as T,d as xe,e as k,s as X,u as m,f as Z,h as E,j as B,S as Ce,k as ue,o as Re,F as Le,P as Ae,l as se}from"./entry-client-e96878ca.js";const Be="_App_qn81j_1",Ve="_GlobalControls_qn81j_6",Fe="_Colors_qn81j_18",De="_BackgroundColorPopup_qn81j_27",Ge="_disabled_qn81j_71",ie={App:Be,GlobalControls:Ve,Colors:Fe,BackgroundColorPopup:De,disabled:Ge},Me="_ColorComponentControl_1g4hn_1",Pe={ColorComponentControl:Me},F="RGB",N="HSL",[p,Ue]=I(F),[Y,ye]=I("#ffffff"),[we,je]=I(!0),He=T('<div><label></label><input type="range" min="0"><input type="number" min="0">');function be(e){const n=j(()=>p()===F?255:e.index===0?360:100),$=j(()=>p()[e.index]),i=s=>{try{let l;switch(p()){case F:if(l=parseInt(s.target.value),l>255)return;break;case N:if(e.index===0){if(l=parseInt(s.target.value),l>360)return}else if(l=parseFloat(s.target.value),l>100)return;break}if(isNaN(l)||l<0)return;e.setValue(l)}catch{}};return(()=>{const s=q(He),l=s.firstChild,r=l.nextSibling,a=r.nextSibling;return A(l,$),r.$$input=i,a.$$input=i,V(o=>{const u=Pe.ColorComponentControl,g=$(),H=n(),D=`${$()} component slider`,z=n(),G=`${$()} component number input`;return u!==o._v$&&k(s,o._v$=u),g!==o._v$2&&X(l,"for",o._v$2=g),H!==o._v$3&&X(r,"max",o._v$3=H),D!==o._v$4&&X(r,"aria-label",o._v$4=D),z!==o._v$5&&X(a,"max",o._v$5=z),G!==o._v$6&&X(a,"aria-label",o._v$6=G),o},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),V(()=>r.value=e.value),V(()=>a.value=e.value),de(),s})()}xe(["input"]);const me=(e,n,$)=>{const i=e/255,s=n/255,l=$/255,r=Math.max(i,s,l),a=Math.min(i,s,l);let o,u,g;return r===a?o=0:r===i?o=(60*((s-l)/(r-a))%360+360)%360:r===s?o=60*((l-i)/(r-a))+120:o=60*((i-s)/(r-a))+240,g=(r+a)/2,r===a?u=0:g<=.5?u=(r-a)/(r+a):u=(r-a)/(2-r-a),o=Math.round(o),u=parseFloat((u*100).toFixed(1)),g=parseFloat((g*100).toFixed(1)),[o,u,g]},fe=(e,n,$)=>{const i=n/100,s=$/100;let l=(1-Math.abs(2*s-1))*i,r=l*(1-Math.abs(e/60%2-1)),a=s-l/2,o,u,g;return e>=0&&e<60?(o=l,u=r,g=0):e>=60&&e<120?(o=r,u=l,g=0):e>=120&&e<180?(o=0,u=l,g=r):e>=180&&e<240?(o=0,u=r,g=l):e>=240&&e<300?(o=r,u=0,g=l):(o=l,u=0,g=r),o=Math.round((o+a)*255),u=Math.round((u+a)*255),g=Math.round((g+a)*255),[o,u,g]},ce=e=>[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5),16)],ze=e=>{const n=ce(e);return me(...n)},pe=(e,n,$)=>{const i=s=>{const l=s/255;return l<=.03928?l/12.92:((l+.055)/1.055)**2.4};return .2126*i(e)+.7152*i(n)+.0722*i($)+.05},Ee=(e,n)=>{const $=pe(...e),i=pe(...n);return $>i?$/i:i/$},Ne="_ColorControls_77rxm_1",qe="_ColorBlock_77rxm_10",Te="_ControlsContainer_77rxm_17",Je="_InfoLine_77rxm_24",Oe="_HexInput_77rxm_31",We="_ContrastRatio_77rxm_41",Ke="_Sliders_77rxm_49",U={ColorControls:Ne,ColorBlock:qe,ControlsContainer:Te,InfoLine:Je,HexInput:Oe,ContrastRatio:We,Sliders:Ke},Qe=T("<div>"),Xe=T('<div><div><input type="text" maxlength="7" aria-label="hex input"><div><span></span><span>:1</span></div></div><div><!#><!/><!#><!/><!#><!/>'),Ye=T("<div><!#><!/><!#><!/>");function Se(e){const[n,$,i]=p()===F?ce(m(e.value)):ze(m(e.value)),[s,l]=I(n),[r,a]=I($),[o,u]=I(i);Z(d=>{if(d!==p()){if(p()===F){const[v,t,c]=fe(m(s),m(r),m(o));l(v),a(t),u(c)}else{const[v,t,c]=me(m(s),m(r),m(o));l(v),a(t),u(c)}return p()}},p());const g=j(()=>{const d=s(),v=r(),t=o();let c;switch(m(p)){case F:c=`rgb(${d}, ${v}, ${t})`;break;case N:c=`hsl(${d}, ${v}%, ${t}%)`;break}let b={"background-color":c};return e.selected!=null&&e.selected()&&(b={...b,outline:"dodgerblue solid 3px","outline-offset":"0.1rem"}),b}),H=()=>{e.selected&&e.setSelected(!e.selected())},D=()=>{let d=[s(),r(),o()];m(p)===N&&(d=fe(...d));const v=`#${d.map(t=>t.toString(16).padStart(2,0)).join("")}`;return e.setBackgroundColor!=null&&e.setBackgroundColor(v),e.setValue!=null&&e.setValue(v),v},z=d=>{let v=d.target.value;if(v.length===6&&!v.startsWith("#"))v=`#${v}`;else if(v.length!==7)return;try{const[t,c,b]=ce(v);let f=[t,c,b];m(p)===N&&(f=me(t,c,b)),l(f[0]),a(f[1]),u(f[2])}catch{}},[G,J]=I(0);Z(()=>{let d=[s(),r(),o()],v=ce(Y());m(p)===N&&(d=fe(...d));const t=Ee(d,v);J((Math.floor(t*100)/100).toFixed(2))});const _e=()=>{const d=G();return{color:d>=7?"#00ff91":d>=3?"white":"#ff003d"}};return(()=>{const d=q(Ye),v=d.firstChild,[t,c]=E(v.nextSibling),b=t.nextSibling,[f,h]=E(b.nextSibling);return A(d,B(Ce,{get when(){return e.index!=null},get children(){const y=q(Qe);return y.$$click=H,V(S=>{const R=U.ColorBlock,L=g();return R!==S._v$&&k(y,S._v$=R),S._v$2=ue(y,L,S._v$2),S},{_v$:void 0,_v$2:void 0}),de(),y}}),t,c),A(d,B(Ce,{get when(){return we()||e.always!=null},get children(){const y=q(Xe),S=y.firstChild,R=S.firstChild,L=R.nextSibling,ee=L.firstChild,w=S.nextSibling,te=w.firstChild,[M,ge]=E(te.nextSibling),O=M.nextSibling,[ne,$e]=E(O.nextSibling),ve=ne.nextSibling,[oe,le]=E(ve.nextSibling);return R.$$input=z,A(ee,G),A(w,B(be,{index:0,get value(){return s()},setValue:l}),M,ge),A(w,B(be,{index:1,get value(){return r()},setValue:a}),ne,$e),A(w,B(be,{index:2,get value(){return o()},setValue:u}),oe,le),V(x=>{const W=U.ControlsContainer,_=U.InfoLine,P=U.HexInput,K=U.ContrastRatio,Q=_e(),re=U.Sliders;return W!==x._v$3&&k(y,x._v$3=W),_!==x._v$4&&k(S,x._v$4=_),P!==x._v$5&&k(R,x._v$5=P),K!==x._v$6&&k(L,x._v$6=K),x._v$7=ue(ee,Q,x._v$7),re!==x._v$8&&k(w,x._v$8=re),x},{_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0}),V(()=>R.value=D()),de(),y}}),f,h),V(()=>k(d,U.ColorControls)),d})()}xe(["click","input"]);let ae;const Ze=new Uint8Array(16);function et(){if(!ae&&(ae=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ae))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ae(Ze)}const C=[];for(let e=0;e<256;++e)C.push((e+256).toString(16).slice(1));function tt(e,n=0){return C[e[n+0]]+C[e[n+1]]+C[e[n+2]]+C[e[n+3]]+"-"+C[e[n+4]]+C[e[n+5]]+"-"+C[e[n+6]]+C[e[n+7]]+"-"+C[e[n+8]]+C[e[n+9]]+"-"+C[e[n+10]]+C[e[n+11]]+C[e[n+12]]+C[e[n+13]]+C[e[n+14]]+C[e[n+15]]}const nt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ke={randomUUID:nt};function ot(e,n,$){if(ke.randomUUID&&!n&&!e)return ke.randomUUID();e=e||{};const i=e.random||(e.rng||et)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,n){$=$||0;for(let s=0;s<16;++s)n[$+s]=i[s];return n}return tt(i)}const lt=T("<div>"),rt=T('<div><div><button aria-label="color mode"><img src="/chromaplay/icons/palette_FILL0_wght400_GRAD0_opsz48.svg" alt="color mode"></button><button aria-label="add color"><img src="/chromaplay/icons/add_FILL0_wght400_GRAD0_opsz48.svg" alt="add"></button><button disabled aria-label="delete selected colors"><img src="/chromaplay/icons/delete_FILL0_wght400_GRAD0_opsz48.svg" alt="delete"></button><button aria-label="toggle background color controls"><img src="/chromaplay/icons/format_color_fill_FILL0_wght400_GRAD0_opsz48.svg" alt="background color"></button><button aria-label="toggle color controls"><img src="/chromaplay/icons/tune_FILL0_wght400_GRAD0_opsz48.svg" alt="swap"></button><button disabled aria-label="swap selected colors"><img src="/chromaplay/icons/autorenew_FILL0_wght400_GRAD0_opsz48.svg" alt="swap"></button><input id="loadPalette" type="file" accept=".json, .toml"><button aria-label="load color palette"><img src="/chromaplay/icons/upload_FILL0_wght400_GRAD0_opsz48.svg" alt="load"></button><a download="chromaplay.json"></a><button aria-label="download color palette"><img src="/chromaplay/icons/download_FILL0_wght400_GRAD0_opsz48.svg" alt="download"></button></div><div></div><!#><!/>');function it(){const[e,n]=I([],{equals:!1}),$=t=>{const[c,b]=I(!1),[f,h]=I(t);return{id:ot(),selected:c,setSelected:b,value:f,setValue:h}},i=()=>{n([...m(e),$("#000000")])},s=()=>n(e().filter(t=>!t.selected())),l=()=>{const t=m(e),c=t.reduce((b,f,h)=>(f.selected()&&(f.setSelected(!1),b.push({c:f,i:h})),b),[]);t.splice(c[0].i,1,c[1].c),t.splice(c[1].i,1,c[0].c),n(t)};Re(()=>{i()});const r=j(()=>e().some(t=>t.selected()));let a;Z(()=>{r()?a.removeAttribute("disabled"):a.setAttribute("disabled","")});const o=j(()=>r()?{opacity:1}:{opacity:.4}),u=j(()=>e().filter(t=>t.selected()).length===2);let g;Z(()=>{u()?g.removeAttribute("disabled"):g.setAttribute("disabled","")});const H=j(()=>u()?{opacity:1}:{opacity:.4}),[D,z]=I(!1),G=()=>{z(!D())};Z(()=>{const t=document.documentElement;t.style.backgroundColor=Y()});let J;const _e=t=>{const c=t.target,b=new FileReader;b.onload=()=>{c.value=null;const f=JSON.parse(b.result);ye(f.background);const h=[];for(const y of f.colors)h.push($(y));n(h)},b.readAsText(t.target.files[0])};let d;const v=()=>{const t={background:m(Y),colors:[]};for(const c of m(e))t.colors.push(m(c.value));d.setAttribute("href",`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(t))}`),d.click()};return(()=>{const t=q(rt),c=t.firstChild,b=c.firstChild,f=b.nextSibling,h=f.nextSibling,y=h.firstChild,S=h.nextSibling,R=S.nextSibling,L=R.nextSibling,ee=L.firstChild,w=L.nextSibling,te=w.nextSibling,M=te.nextSibling,ge=M.nextSibling,O=c.nextSibling,ne=O.nextSibling,[$e,ve]=E(ne.nextSibling);b.$$click=()=>Ue(p()===F?N:F),f.$$click=i,h.$$click=s;const oe=a;typeof oe=="function"?se(oe,h):a=h,S.$$click=G,R.$$click=()=>je(!we()),L.$$click=l;const le=g;typeof le=="function"?se(le,L):g=L,w.addEventListener("change",_e);const x=J;typeof x=="function"?se(x,w):J=w,w.style.setProperty("display","none"),te.$$click=()=>J.click();const W=d;return typeof W=="function"?se(W,M):d=M,M.style.setProperty("display","none"),ge.$$click=v,A(O,B(Le,{get each(){return e()},children:(_,P)=>B(Se,{get id(){return`color_${_.id}`},get index(){return P()},get selected(){return _.selected},get setSelected(){return _.setSelected},get value(){return _.value},get setValue(){return _.setValue}})})),A(t,B(Ce,{get when(){return D()},get children(){return B(Ae,{get children(){const _=q(lt);return A(_,B(Se,{value:Y,setBackgroundColor:ye,always:!0})),V(()=>k(_,ie.BackgroundColorPopup)),_}})}}),$e,ve),V(_=>{const P=ie.App,K=ie.GlobalControls,Q=Y(),re=o(),Ie=H(),he=ie.Colors;return P!==_._v$&&k(t,_._v$=P),K!==_._v$2&&k(c,_._v$2=K),Q!==_._v$3&&((_._v$3=Q)!=null?c.style.setProperty("background-color",Q):c.style.removeProperty("background-color")),_._v$4=ue(y,re,_._v$4),_._v$5=ue(ee,Ie,_._v$5),he!==_._v$6&&k(O,_._v$6=he),_},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),de(),t})()}xe(["click"]);export{it as default};
